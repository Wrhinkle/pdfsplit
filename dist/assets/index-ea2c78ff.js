(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}})();pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.worker.min.js";const c=document.getElementById("drop-area"),v=document.getElementById("fileElem"),p=document.getElementById("gallery"),g=document.getElementById("splitButton"),u=document.getElementById("pageContainer");let l=null;["dragenter","dragover","dragleave","drop"].forEach(e=>{c.addEventListener(e,w,!1)});function w(e){e.preventDefault(),e.stopPropagation()}["dragenter","dragover"].forEach(e=>{c.addEventListener(e,y,!1)});["dragleave","drop"].forEach(e=>{c.addEventListener(e,E,!1)});function y(e){c.classList.add("highlight")}function E(e){c.classList.remove("highlight")}c.addEventListener("drop",P,!1);function P(e){const s=e.dataTransfer.files;m(s)}v.addEventListener("change",function(){m(this.files)});function m(e){e.length>0&&e[0].type==="application/pdf"?(l=e[0],L(),g.disabled=!1):alert("Please select a valid PDF file.")}function L(){p.innerHTML="";const e=document.createElement("div");e.className="file-info",e.textContent=`File: ${l.name} (${D(l.size)})`,p.appendChild(e)}function D(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB"}g.addEventListener("click",async()=>{if(!l){alert("Please select a PDF file first.");return}const e=await l.arrayBuffer(),a=await pdfjsLib.getDocument(e).promise,s=a.numPages;u.innerHTML="";for(let o=1;o<=s;o++){const t=await a.getPage(o),n=1.5,r=t.getViewport({scale:n}),i=document.createElement("canvas"),h=i.getContext("2d");i.height=r.height,i.width=r.width,await t.render({canvasContext:h,viewport:r}).promise;const d=document.createElement("button");d.textContent=`Download Page ${o}`,d.className="download-button",d.addEventListener("click",()=>B(e,o));const f=document.createElement("div");f.className="page-preview",f.appendChild(i),f.appendChild(d),u.appendChild(f)}});async function B(e,a){const s=await PDFLib.PDFDocument.load(e),o=await PDFLib.PDFDocument.create(),[t]=await o.copyPages(s,[a-1]);o.addPage(t);const n=await o.save(),r=new Blob([n],{type:"application/pdf"}),i=document.createElement("a");i.href=URL.createObjectURL(r),i.download=`page_${a}.pdf`,i.click()}
